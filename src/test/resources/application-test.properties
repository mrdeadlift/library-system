# テスト環境用設定

# H2データベース設定（インメモリ）
# - publicスキーマを明示的に作成し、jOOQとの互換性を確保
# - H2のPostgreSQLモードを有効化してより高い互換性を提供
spring.datasource.url=jdbc:h2:mem:testdb;MODE=PostgreSQL;DATABASE_TO_LOWER=TRUE;DEFAULT_NULL_ORDERING=HIGH;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
spring.datasource.driver-class-name=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=

# Flywayマイグレーション設定 - テスト用に無効化（独自スキーマ初期化を使用）
spring.flyway.enabled=false

# SQL初期化設定
spring.sql.init.mode=always
spring.sql.init.schema-locations=classpath:schema.sql
spring.sql.init.continue-on-error=false

# jOOQ設定 - H2でPostgreSQLライクな動作を有効化
spring.jooq.sql-dialect=H2

# ログ設定 - テスト時の詳細ログ
logging.level.org.jooq=DEBUG
logging.level.org.springframework.jdbc=DEBUG
logging.level.org.springframework.sql=DEBUG
logging.level.com.example.library=DEBUG