# Test environment configuration

# H2 Database configuration (in-memory)
# - Explicitly create public schema to ensure jOOQ compatibility
# - Enable H2 PostgreSQL mode for higher compatibility
spring.datasource.url=jdbc:h2:mem:testdb;MODE=PostgreSQL;DATABASE_TO_LOWER=TRUE;DEFAULT_NULL_ORDERING=HIGH;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
spring.datasource.driver-class-name=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=

# Flyway migration settings - disabled for testing (using custom schema initialization)
spring.flyway.enabled=false

# SQL initialization settings
spring.sql.init.mode=always
spring.sql.init.schema-locations=classpath:schema.sql
spring.sql.init.continue-on-error=false

# jOOQ configuration - enable PostgreSQL-like behavior in H2
spring.jooq.sql-dialect=H2

# Jackson configuration - JST timezone unification to resolve timezone issues
spring.jackson.time-zone=Asia/Tokyo
spring.jackson.serialization.write-dates-as-timestamps=false

# JVM system property for timezone unification (test environment)
# This property ensures both H2 and Spring use JST
spring.h2.console.settings.web-allow-others=false

# Logging configuration - detailed logs during testing
logging.level.org.jooq=DEBUG
logging.level.org.springframework.jdbc=DEBUG
logging.level.org.springframework.sql=DEBUG
logging.level.com.example.library=DEBUG